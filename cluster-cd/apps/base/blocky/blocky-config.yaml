---
port: 53
httpPort: 4000

logLevel: info
logFormat: json

upstream:
  default:
    - tcp-tls:1.1.1.1:853
    - tcp-tls:1.0.0.1:853
    - https://cloudflare-dns.com/dns-query

filtering:
  queryTypes:
    - AAAA

blocking:
  blackLists:
    ads:
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
      # - https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt
      # - http://sysctl.org/cameleon/hosts
      # - https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt
      # - https://raw.githubusercontent.com/kboghdady/youTube_ads_4_pi-hole/master/youtubelist.txt
    kid-safe:
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews-gambling-porn/hosts
    none:
  whiteLists:
    ads:
      - |
        comcastathena.demdex.net
        dl.cws.xfinity.com
        login.xfinity.com
        oauth.xfinity.com
        business.comcast.com
        assets.adobedtm.com
        static.digital.business.comcast.com
        dpm.demdex.net
        comcastresidentialservices.tt.omtrdc.net
        www.reddit.com
        discourse.pi-hole.net
        img04.en25.com
        xchat.xfinity.com
        script.crazyegg.com
        assets.bounceexchange.com
        api.bounceexchange.com
        events.bouncex.net
        media.xchat.xfinity.com
        files.slack.com
        slack.com
        www.kqzyfj.com
        kqzyfj.com
        cdn.heapanalytics.com
        # Allow Google Ads
        www.googleadservices.com
        dartsearch.net
        www.googletagmanager.com
        www.googletagservices.com
        ad.doubleclick.net
        clickserve.dartsearch.net
        t.myvisualiq.net

  clientGroupsBlock:
    default:
      - ads
    172.16.0.0/12:
      - ads
    12a06:a003:4018::/48:
      - ads
    192.168.0.0/16:
      - ads
    192.168.4.1/24:
      - ads
      - kid-safe
  blockType: zeroIp

clientLookup:
  upstream: 172.16.254.1
  singleNameOrder:
    - 2
    - 1

caching:
  minTime: 5m
  cacheTimeNegative: 30m
  prefetching: true

redis:
  address: redis:6379
  password: REDIS_PASSWORD
  required: true

queryLog:
  type: postgresql
  target: postgresql://POSTGRES_USER:POSTGRES_PASSWORD@postgres:5432/POSTGRES_DB_NAME?sslmode=disable
  logRetentionDays: 30

prometheus:
  enable: true
  path: /metrics
