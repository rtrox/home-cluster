---
logger:
  default: info
  # logs:
  #   frigate.record: debug

mqtt:
  host: mosquitto.home.svc.cluster.local
  topic_prefix: frigate
  user: "{FRIGATE_MQTT_USER}"
  password: "{FRIGATE_MQTT_PASSWORD}"

database:
  path: /data/frigate.db

detectors:
  coral:
    type: edgetpu
    device: usb

ffmpeg:
  # global_args: ["-hide_banner", "-loglevel", "warning"]
  # hwaccel_args: preset-vaapi
  output_args:
    record: preset-record-generic-audio-aac


snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  clean_copy: true

  retain:
    default: 14

record:
  enabled: true
  retain:
    days: 3
    mode: all
  events:
    pre_capture: 20
    post_capture: 15
    retain:
      default: 7
      mode: active_objects
      objects:
        person: 14
        dog: 2
        cat: 2
        car: 7

objects:
  track:
    - package
    - person
    - dog
    - cat
    - motorcycle
    - car
  filters:
    person:
      threshold: 0.7

ui:
  live_mode: mse
  use_experimental: false

go2rtc:
  rtsp:
    username: "admin"
    password: ${FRIGATE_RTSP_PASSWORD}
  streams:
    carport_hq:
      - ${CARPORT_CAM_PATH_HQ}
      # WebRTC can't handle h.265, and it needs opus or PCMU/PCMA audio
      - "ffmpeg:carport_hq#audio=opus"
    carport_lq:
      - ${CARPORT_CAM_PATH_LQ}
      - "ffmpeg:caport_lq#audio=opus"
    frontdoor_hq:
      - ${FRONTDOOR_CAM_PATH_HQ}
      - "ffmpeg:frontdoor_hq#audio=opus"
    frontdoor_lq:
      - ${FRONTDOOR_CAM_PATH_LQ}
      - "ffmpeg:frontdoor_lq#audio=opus"
    backdoor_hq:
      - ${BACKDOOR_CAM_PATH_HQ}
      - "ffmpeg:backdoor_hq#audio=opus"
    backdoor_lq:
      - ${BACKDOOR_CAM_PATH_LQ}
      - "ffmpeg:backdoor_lq#audio=opus"
  webrtc:
    candidates:
      - FRIGATE_SERVICE_HOST:FRIGATE_SERVICE_PORT_WEBRTCTCP
      - FRIGATE_LB_IP:FRIGATE_SERVICE_PORT_WEBRTCTCP


cameras:
  carport:
    enabled: true
    live:
      stream_name: carport_hq
    ffmpeg:
      inputs:
        # - path: ${CARPORT_CAM_PATH_LQ}
        #   roles:
        #     - detect
        - path: rtsp://127.0.0.1:8554/carport_lq
          input_args: preset-rtsp-restream
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/carport_hq
          input_args: preset-rtsp-restream
          roles:
            - record
    objects:
      track:
        - person
        - dog
        - cat
        - package
    zones:
      backyard:
        coordinates: 213,294,224,0,490,0,652,93,642,239,560,369,0,430,0,393
      neighbors:
        coordinates: 0,0,199,0,213,271,0,409
        objects: []
    detect:
      width: 640
      height: 480
      fps: 10

  frontdoor:
    enabled: true
    live:
      stream_name: frontdoor_hq
    ffmpeg:
      inputs:
        # - path: ${CARPORT_CAM_PATH_LQ}
        #   roles:
        #     - detect
        - path: rtsp://127.0.0.1:8554/frontdoor_lq
          input_args: preset-rtsp-restream
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/frontdoor_hq
          input_args: preset-rtsp-restream
          roles:
            - record
    objects:
      track:
        - person
        - dog
        - cat
        - package
    zones:
      street:
        coordinates: 0,576,720,576,720,385,530,330,246,343,101,342,0,374
        objects: []
      yard:
        coordinates: 536,325,720,386,720,576,0,576,0,381,105,337,224,350,269,354
      driveway:
        coordinates: 597,308,720,335,720,384,531,326
    detect:
      width: 720
      height: 576
      fps: 10

  backdoor:
    enabled: true
    live:
      stream_name: backdoor_hq
    ffmpeg:
      inputs:
        # - path: ${CARPORT_CAM_PATH_LQ}
        #   roles:
        #     - detect
        - path: rtsp://127.0.0.1:8554/backdoor_lq
          input_args: preset-rtsp-restream
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/backdoor_hq
          input_args: preset-rtsp-restream
          roles:
            - record
    objects:
      track:
        - person
        - dog
        - cat
        - package
    zones:
      under_carport:
        coordinates: 568,353,720,329,720,576,0,576,0,318,111,310,321,351
      neighbor:
        coordinates: 379,201,632,235,720,125,720,333,327,353,126,305,77,303,76,263,222,268
        objects: []
    detect:
      width: 720
      height: 576
      fps: 10
