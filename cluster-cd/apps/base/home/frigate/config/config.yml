---
logger:
  default: info
  # logs:
  #   frigate.record: debug

mqtt:
  host: mosquitto.home.svc.cluster.local
  topic_prefix: frigate
  user: "{FRIGATE_MQTT_USER}"
  password: "{FRIGATE_MQTT_PASSWORD}"

database:
  path: /data/frigate.db

detectors:
  coral:
    type: edgetpu
    device: usb

ffmpeg:
  # global_args: ["-hide_banner", "-loglevel", "warning"]
  # hwaccel_args: preset-vaapi
  output_args:
    record: preset-record-generic-audio-aac


snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  clean_copy: true

  retain:
    default: 14

record:
  enabled: true
  retain:
    days: 3
    mode: all
  events:
    pre_capture: 20
    post_capture: 15
    retain:
      default: 7
      mode: active_objects
      objects:
        person: 14
        dog: 2
        cat: 2
        car: 7

objects:
  track:
    - package
    - person
    - dog
    - cat
    - motorcycle
    - car
  filters:
    person:
      threshold: 0.7

ui:
  live_mode: mse
  use_experimental: false

go2rtc:
  streams:
    carport_hq:
      - ${CARPORT_CAM_PATH_HQ}
      # WebRTC can't handle h.265, and it needs opus or PCMU/PCMA audio
      - "ffmpeg:carport_hq#video=h264#audio=opus"
    carport_lq:
      - ${CARPORT_CAM_PATH_LQ}
      - "ffmpeg:caport_lq#video=h264#audio=opus"
    frontdoor_hq:
      - ${FRONTDOOR_CAM_PATH_HQ}
      - "ffmpeg:frontdoor_hq#video=h264#audio=opus"
    frontdoor_lq:
      - ${FRONTDOOR_CAM_PATH_LQ}
      - "ffmpeg:frontdoor_lq#video=h264#audio=opus"
    backdoor_hq:
      - ${BACKDOOR_CAM_PATH_HQ}
      - "ffmpeg:backdoor_hq#video=h264#audio=opus"
    backdoor_lq:
      - ${BACKDOOR_CAM_PATH_LQ}
      - "ffmpeg:backdoor_lq#video=h264#audio=opus"
  # webrtc:
  #   candidates:
  #     - FRIGATE_SERVICE_HOST:FRIGATE_SERVICE_PORT_WEBRTCTCP
  #     - FRIGATE_LB_IP:FRIGATE_SERVICE_PORT_WEBRTCTCP


cameras:
  carport:
    enabled: true
    live:
      stream_name: carport_hq
    ffmpeg:
      inputs:
        # - path: ${CARPORT_CAM_PATH_LQ}
        #   roles:
        #     - detect
        - path: rtsp://127.0.0.1:8554/carport_hq
          input_args: preset-rtsp-restream
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/carport_hq
          input_args: preset-rtsp-restream
          roles:
            - record
    objects:
      track:
        - person
        - dog
        - cat
        - package
    zones:
      backyard:
        coordinates: 213,294,224,0,490,0,652,93,642,239,560,369,0,430,0,393
      neighbors:
        coordinates: 0,0,199,0,213,271,0,409
        objects: []
    detect:
      width: 2560
      height: 1920
      fps: 10

  frontdoor:
    enabled: true
    live:
      stream_name: frontdoor_hq
    ffmpeg:
      inputs:
        # - path: ${CARPORT_CAM_PATH_LQ}
        #   roles:
        #     - detect
        - path: rtsp://127.0.0.1:8554/frontdoor_hq
          input_args: preset-rtsp-restream
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/frontdoor_hq
          input_args: preset-rtsp-restream
          roles:
            - record
    objects:
      track:
        - person
        - dog
        - cat
        - package
    detect:
      width: 2560
      height: 1920
      fps: 10

  backdoor:
    enabled: true
    live:
      stream_name: backdoor_hq
    ffmpeg:
      inputs:
        # - path: ${CARPORT_CAM_PATH_LQ}
        #   roles:
        #     - detect
        - path: rtsp://127.0.0.1:8554/backdoor_hq
          input_args: preset-rtsp-restream
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/backdoor_hq
          input_args: preset-rtsp-restream
          roles:
            - record
    objects:
      track:
        - person
        - dog
        - cat
        - package
    detect:
      width: 2560
      height: 1920
      fps: 10
