image:
  repository: ghcr.io/rtrox/necesse-server
  pullPolicy: IfNotPresent
  tag: 0.21.29@sha256:60140aa9ac563c9de807948a6472adb7008dd348648df9e9bbec57bcc042a964

global:
  labels:
    app.kubernetes.io/instance: &name necesse
    app.kubernetes.io/component: *name
    app.kubernetes.io/part-of: *name

strategy:
  type: Recreate

podAnnotations:
  backup.velero.io/backup-volumes: saves

env:
  PASSWORD: ${SECRET_NECESSE_PASSWORD}
  PAUSE: 1
  WORLD: necesse-chongus
  MOTD: "Chongus - A Necesse Server powered by k8s."
  SLOTS: 10

service:
  main:
    enabled: true
    type: LoadBalancer
    annotations:
      io.cilium/lb-ipam-ips: "${NECESSE_LB_IP}"
      metallb.universe.tf/loadBalancerIPs: "${NECESSE_LB_IP}"
    ports:
      http:
        port: 14159

securityContext:
  allowPrivilegeEscalation: false
  runAsNonRoot: true
  runAsUser: 1000
  seccompProfile:
    type: RuntimeDefault
  capabilities:
    drop:
      - ALL


podSecurityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

resources:
  limits:
    cpu: 2000m
    memory: 8Gi
  requests:
    cpu: 1000m
    memory: 8Gi

persistence:
  data:
    enabled: true
    type: pvc
    accessMode: ReadWriteOnce
    size: 30Gi
    mountPath: /data
  config:
    enabled: true
    type: pvc
    accessMode: ReadWriteOnce
    size: 1Gi
    mountPath: /config
